<!DOCTYPE html>
<html lang="en">

<head>
    <title>üê±ü•Å</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="/index.css">
    <link rel="icon" type="image/ico" href="/favicon.ico" sizes="32x32">
    <script type="text/javascript">

        window.onload = () => {
            var bongocat = document.querySelector("#bongocat");
            var originalSource = document.querySelector("#source");
            var submitter = document.querySelector("#submitter");
            function slapTheBongo() {
                console.log("bongocat!");
                fetch("https://lkub5gai6i.execute-api.us-east-1.amazonaws.com/prod/slap/the/bongo")
                    .then(res => res.json())
                    .then(json => {
                        bongocat.src = json.src.S;
                        originalSource.href = json.original.S;
                        submitter.href = "https://twitter.com/" + json.submitter.S;
                        submitter.innerText = "@" + json.submitter.S;
                    })
                    .catch(err => {
                        console.log("wtf?");
                        console.log(err);
                    });
            }
            slapTheBongo();
            autoPlayWarningSeen = false;
            document.onkeydown = function (e) {
                e = e || window.event;
                switch (e.keyCode) {
                    case 32:
                        // [space] Request different video
                        slapTheBongo();
                        if (!autoPlayWarningSeen) {
                            autoPlayWarningSeen = true;
                            document.getElementById("autoplay-warning").remove();
                        }
                        break;
                    case 189:
                        // [-] Make video smaller
                        var currentSize = +bongocat.style.width.substring(0, 2);
                        bongocat.style.width = currentSize - 5 + "vw";
                        bongocat.style.height = currentSize - 5 + "vh";
                        break;
                    case 187:
                        // [+] Make video larger
                        var currentSize = +bongocat.style.width.substring(0, 2);
                        bongocat.style.width = currentSize + 5 + "vw";
                        bongocat.style.height = currentSize + 5 + "vh";
                        break;
                    case 80:
                        // [-] Play/pause the video
                        if (bongocat.paused) return bongocat.play();
                        bongocat.pause();
                        break;
                    case 70:
                        // [f] Show/hide footer
                        var f = document.getElementById("footer");
                        var ff = document.getElementById('fake-footer');
                        if (f.style.display === "none") {
                            f.style.display = "block";
                            ff.style.display = "none";
                        } else {
                            f.style.display = "none";
                            ff.style.display = "block";
                        }

                }
            }
        }

    </script>
</head>

<body>
    <div class="root">
        <div class="header">
            <!-- just chillin -->
        </div>
        <video autoplay="autoplay" id="bongocat" style="width: 50vw; height: 50vh"></video>
        <div class="footer" id="footer">
            <p id="autoplay-warning">you may need to press <span class="kbd">space</span> once to get the party
                started!</p>
            <p><a href="#" target="_blank" id="source">original source</a> submitted by <a href="#" id="submitter"
                    target="_blank">@nexuist</a></p>
            <ul class="kbd-bar">
                <li class="kbd-item"><span class="kbd">space</span> another video </li>
                <li class="kbd-item"><span class="kbd">+</span> zoom in</li>
                <li class="kbd-item"><span class="kbd">-</span> zoom out</li>
                <li class="kbd-item"><span class="kbd">p</span> play/pause</li>
                <li class="kbd-item"><span class="kbd">f</span> show/hide footer</li>
            </ul>
            <span>
                <a href="https://twitter.com/nexuist?ref_src=twsrc%5Etfw" class="twitter-follow-button" data-show-count="true">Follow
                    @nexuist</a>
                <a href="https://twitter.com/intent/tweet?button_hashtag=bongocat&ref_src=twsrc%5Etfw" class="twitter-hashtag-button"
                    data-url="https://bongocat.io" data-related="nexuist" data-show-count="false">Tweet #bongocat</a>
            </span>
            <div>
                made with ‚ù§Ô∏è by andi
                <br />
                <a href="https://bongo.cat" target="_blank">try bongo.cat</a>
                <a href="mailto:submissions@bongocat.io?subject=BONGOCAT!&body=Please%20follow%20the%20format%20below.%20This%20email%20will%20be%20automatically%20scanned%20and%20you%20will%20receive%20a%20response%20when%20your%20submission%20is%20accepted.%20Thank%20you!%0A%0A.mp4%20%2F%20YouTube%20direct%20link%3A%0AOriginal%20source%3A%0AYour%20Twitter%20username%20(for%20credit)%3A%0AAnything%20to%20plug%3F%20(may%20appear%20on%20page%20when%20your%20submission%20is%20viewed)%3A%0A%0ATweet%20%40nexuist%20for%20any%20questions."
                    target="_blank">submit a bongocat</a>
            </div>
        </div>
        <div id="fake-footer" style="display: none">
            <!-- looking through my code? tell me how your day's going! -> @nexuist -->
            <!-- if you're wondering why this fake footer is needed, it's bc flex only gives you top/center/bottom when you have 3 divs visible and i'm too lazy to work around that -->
        </div>
    </div>
    <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</body>

</html>